# 6.2 置信区间 (Confidence Intervals)：侦探的“误差带”工具包

在掌握了中心极限定理后，我们获得了从样本推断总体的强大理论基础。现在，让我们来学习一个核心的推断工具——**置信区间 **(CI)。

### 6.2.1 什么是置信区间？

想象你正在调查一个案件，需要估算“城市中成年人的平均身高”。你测量了100个人，得到平均身高是175cm。

*   **点估计**: 175cm 是你对“真实平均身高”的一个猜测。但它只是一个点，你无法评估其精确度。
*   **置信区间 **(CI) 这就像给你的点估计加上一个**误差带**。它提供了一个范围，比如 [173cm, 177cm]，并附带一个“可信度”——例如，95%置信区间。

**95%置信区间的含义**：如果你用完全相同的方法重复抽样100次，每次都计算一个95%的置信区间，那么大约有95个区间会包含真实的总体均值，而大约有5个区间不会包含它。对于任何一个特定的区间，真实均值要么在里面，要么不在。

### 6.2.2 核心公式与要素

置信区间的计算遵循统一公式：

**置信区间 = 点估计 ± (临界值 * 标准误差)**

*   **点估计**: 你要估计的总体参数的样本估计值，如样本均值 $\bar{x}$ 或样本比例 $\hat{p}$。
*   **临界值 **(Critical Value) 取决于你选择的**置信水平 **(CL)。对于估计均值，且样本量较大时，使用Z分布。
    *   90% CL -> Z* ≈ 1.645
    *   95% CL -> Z* ≈ 1.96
    *   99% CL -> Z* ≈ 2.576
*   **标准误差 **(SE) 衡量点估计的变异性。
    *   估计**总体均值**: $SE = \frac{s}{\sqrt{n}}$ (s为样本标准差, n为样本量) 或 $SE = \frac{\sigma}{\sqrt{n}}$ (σ为已知的总体标准差)。
    *   估计**总体比例**: $SE = \sqrt{\frac{\hat{p}(1-\hat{p})}{n}}$。

#### 关键概念：误差范围 (Margin of Error, MOE)

**误差范围**是公式中 `临界值 * 标准误差` 这一部分。它定义了置信区间的“宽度”。
$$MOE = Z^* \times SE$$
置信区间也可以写成: `点估计 ± MOE`

*   **MOE 越大**：区间越宽，估计越不精确，但信心越高。
*   **MOE 越小**：区间越窄，估计越精确，但信心相对降低。

**影响 MOE 的因素**:

1.  **置信水平 **(CL) CL 越高 (如从 95% 提升到 99%)，Z* 越大，MOE 越大。
2.  **标准误差 **(SE) SE 受以下因素影响：
    *   **数据变异性 **(s 或 σ) 数据越分散，SE 和 MOE 越大。
    *   **样本量 **(n) 样本量越大，SE 越小 ($SE \propto \frac{1}{\sqrt{n}}$)，MOE 越小。这是提高估计精确度最直接的方法。

### 6.2.3 实际案例：估算平均身高

> **情景**: 你调查了 100 人，样本均值 $\bar{x} = 175$ cm，样本标准差 $s = 10$ cm。

1.  **计算 95% 置信区间**:
    *   $Z^* = 1.96$
    *   $SE = s / \sqrt{n} = 10 / \sqrt{100} = 10 / 10 = 1$
    *   $MOE = 1.96 \times 1 = 1.96$
    *   $CI = 175 \pm 1.96 = [173.04, 176.96]$
    *   **解读**: 我们有95%的信心认为，城市成年人的真实平均身高在173.04cm到176.96cm之间。

2.  **比较不同置信水平**:
    *   **90% CL**: $Z^* \approx 1.645$, $MOE = 1.645 \times 1 = 1.645$, $CI = [173.36, 176.64]$ (更窄)
    *   **99% CL**: $Z^* \approx 2.576$, $MOE = 2.576 \times 1 = 2.576$, $CI = [172.42, 177.58]$ (更宽)

### 6.2.4 确定所需样本量 (n)

在进行研究前，你可能希望预先设定一个“希望达到的估计精确度”，即**希望的误差范围 **(MOE_wanted)。你可以据此计算出**最小**样本量。

**求解样本量 n 的公式**:
从 $MOE = Z^* \times \frac{\sigma}{\sqrt{n}}$ 推导而来。如果 $\sigma$ 未知，用一个预估的标准差 $s$ 代替。
$$n = \left(\frac{Z^* \times s}{MOE_{wanted}}\right)^2$$

> **关键**: **先**确定你想要的置信水平（确定 Z*）和希望的 MOE，**再**估算或预估标准差 s，就可以算出 n。

#### 案例：规划样本量

> **情景**: 在进行上述身高调查前，你希望在95%置信水平下，误差范围 (MOE) 不超过 1 cm。根据过往经验，预估身高标准差 $\sigma \approx 10$ cm。

*   $Z^* = 1.96$ (95% CL)
*   $MOE_{wanted} = 1$ cm
*   $s = 10$ cm
*   $n = \left(\frac{1.96 \times 10}{1}\right)^2 = (19.6)^2 = 384.16$

**结论**: 你需要至少 **385** 人（向上取整）的样本量才能满足要求。

### 6.2.5 置信区间与 p-value 的关系

在假设检验（如 t 检验）中，如果 p-value < 0.05 (在 α=0.05 的显著性水平下)，我们**拒绝**原假设（比如 $H_0: \mu = \mu_0$）。这与 **95% 置信区间**不包含原假设的值（$\mu_0$）**是等价的**。

*   p-value < 0.05 → 拒绝 $H_0: \mu = \mu_0$ → 95% CI **不包含** $\mu_0$
*   p-value ≥ 0.05 → 不拒绝 $H_0: \mu = \mu_0$ → 95% CI **包含** $\mu_0$

两者是看待同一统计结论的不同方式。